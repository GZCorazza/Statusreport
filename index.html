<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Executivo de Portfólio</title>
  <style>
    :root {
      --bg: #0b1020;
      --surface: #111a31;
      --surface-soft: #182542;
      --text: #e6ecff;
      --muted: #9fb0d9;
      --line: #243457;
      --ok: #18c37e;
      --warn: #ffb020;
      --risk: #ff5d5d;
      --info: #4d86ff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Inter, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at top right, #1a2850, var(--bg) 35%);
      color: var(--text);
    }

    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 24px;
      display: grid;
      gap: 18px;
    }

    .panel {
      background: linear-gradient(155deg, rgba(255,255,255,0.04), rgba(255,255,255,0.01));
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(5, 8, 18, 0.4);
    }

    .hero {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 22px;
      gap: 16px;
    }

    h1 { margin: 0; font-size: 1.6rem; }
    .subtitle { color: var(--muted); margin-top: 6px; font-size: 0.95rem; }

    .actions { display: flex; gap: 10px; flex-wrap: wrap; }

    button {
      border: 0;
      border-radius: 10px;
      padding: 10px 14px;
      font-weight: 700;
      cursor: pointer;
    }

    .btn-primary { background: linear-gradient(135deg, #4d86ff, #6a5cff); color: white; }
    .btn-muted { background: #22345c; color: #dce6ff; }

    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(130px, 1fr));
      gap: 10px;
      padding: 0 22px 20px;
    }

    .kpi {
      background: var(--surface);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 12px;
    }

    .kpi small { color: var(--muted); display: block; font-size: .78rem; }
    .kpi strong { font-size: 1.4rem; margin-top: 6px; display: block; }

    .main-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 18px;
    }

    .project-list { padding: 18px; }

    table { width: 100%; border-collapse: collapse; }
    th, td { text-align: left; padding: 10px 8px; border-bottom: 1px solid var(--line); vertical-align: top; }
    th { color: var(--muted); font-weight: 600; font-size: .82rem; text-transform: uppercase; }

    .status {
      display: inline-flex;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: .75rem;
      font-weight: 700;
      border: 1px solid;
    }

    .on-track { color: var(--ok); border-color: rgba(24,195,126,.5); background: rgba(24,195,126,.1); }
    .attention { color: var(--warn); border-color: rgba(255,176,32,.5); background: rgba(255,176,32,.12); }
    .blocked { color: var(--risk); border-color: rgba(255,93,93,.5); background: rgba(255,93,93,.12); }

    .bar {
      width: 100%;
      height: 8px;
      background: #253962;
      border-radius: 999px;
      overflow: hidden;
      margin-top: 6px;
    }

    .bar > span { display: block; height: 100%; background: linear-gradient(90deg, #4d86ff, #6a5cff); }

    .right-col { display: grid; gap: 18px; }

    .summary, .editor { padding: 18px; }

    .legend { display: grid; gap: 10px; margin-top: 10px; }
    .legend-item { display: grid; grid-template-columns: 88px 1fr 32px; align-items: center; gap: 8px; font-size: .85rem; }
    .legend-item .track { height: 8px; background: #263a63; border-radius: 999px; overflow: hidden; }
    .legend-item .fill { height: 100%; }

    textarea {
      width: 100%;
      min-height: 210px;
      background: #0e1830;
      color: #d8e4ff;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: .78rem;
      line-height: 1.4;
    }

    .hint { color: var(--muted); font-size: .8rem; margin-top: 8px; }

    @media (max-width: 980px) {
      .main-grid { grid-template-columns: 1fr; }
      .kpi-grid { grid-template-columns: repeat(2, minmax(120px, 1fr)); }
    }
  </style>
</head>
<body>
  <div class="container">
    <section class="panel">
      <div class="hero">
        <div>
          <h1 id="title"></h1>
          <div id="subtitle" class="subtitle"></div>
        </div>
        <div class="actions">
          <button class="btn-primary" onclick="applyEditorData()">Aplicar atualização semanal</button>
          <button class="btn-muted" onclick="window.print()">Exportar PDF</button>
        </div>
      </div>
      <div class="kpi-grid" id="kpis"></div>
    </section>

    <section class="main-grid">
      <article class="panel project-list">
        <h2 style="margin-top: 0">Projetos prioritários</h2>
        <table>
          <thead>
            <tr>
              <th>Projeto</th>
              <th>Status</th>
              <th>Progresso</th>
              <th>Próximo marco</th>
              <th>Mensagem executiva</th>
            </tr>
          </thead>
          <tbody id="projects"></tbody>
        </table>
      </article>

      <div class="right-col">
        <article class="panel summary">
          <h2 style="margin-top:0">Distribuição de status</h2>
          <div class="legend" id="statusChart"></div>
        </article>

        <article class="panel editor">
          <h2 style="margin-top:0">Editor semanal (JSON)</h2>
          <textarea id="editor"></textarea>
          <div class="hint">Edite data da semana, KPIs e projetos. Clique em <strong>Aplicar atualização semanal</strong> para refletir no dashboard.</div>
        </article>
      </div>
    </section>
  </div>

  <script>
    const baseData = {
      reportTitle: "Dashboard Executivo de Portfólio de Projetos",
      week: "Semana 07 • Fevereiro 2026",
      owner: "PMO Corporativo",
      kpis: [
        { label: "Projetos ativos", value: 12 },
        { label: "No prazo", value: 8 },
        { label: "Em atenção", value: 3 },
        { label: "Bloqueados", value: 1 },
        { label: "Budget consumido", value: "63%" }
      ],
      projects: [
        { name: "Programa ERP", area: "Backoffice", status: "attention", progress: 68, milestone: "Teste integrado concluído (14/02)", note: "Atenção no cronograma fiscal. Mitigação já em execução." },
        { name: "Plataforma Analytics", area: "Dados", status: "on-track", progress: 74, milestone: "Go-live da camada semântica (18/02)", note: "Aumento de produtividade em relatórios gerenciais." },
        { name: "App Cliente 2.0", area: "Digital", status: "blocked", progress: 41, milestone: "Integração antifraude (pendente)", note: "Dependência crítica externa. Escalonamento realizado." },
        { name: "Modernização Cloud", area: "Infraestrutura", status: "on-track", progress: 83, milestone: "Desativação datacenter legado (20/02)", note: "Redução prevista de 28% em custo operacional." },
        { name: "Programa Cibersegurança", area: "Risco", status: "on-track", progress: 77, milestone: "Cobertura EDR em 100% da operação", note: "Sem incidentes relevantes nesta semana." }
      ]
    };

    const statusMeta = {
      "on-track": { label: "No prazo", className: "on-track", color: "#18c37e" },
      "attention": { label: "Atenção", className: "attention", color: "#ffb020" },
      "blocked": { label: "Bloqueado", className: "blocked", color: "#ff5d5d" }
    };

    let currentData = structuredClone(baseData);

    function renderDashboard(data) {
      document.getElementById("title").textContent = data.reportTitle;
      document.getElementById("subtitle").textContent = `${data.week} • Responsável: ${data.owner}`;

      document.getElementById("kpis").innerHTML = data.kpis
        .map(k => `<div class="kpi"><small>${k.label}</small><strong>${k.value}</strong></div>`)
        .join("");

      document.getElementById("projects").innerHTML = data.projects.map(project => {
        const meta = statusMeta[project.status] || statusMeta.attention;
        return `
          <tr>
            <td><strong>${project.name}</strong><br><span style="color:var(--muted);font-size:.8rem">${project.area}</span></td>
            <td><span class="status ${meta.className}">${meta.label}</span></td>
            <td>
              <div style="font-weight:700">${project.progress}%</div>
              <div class="bar"><span style="width:${project.progress}%"></span></div>
            </td>
            <td>${project.milestone}</td>
            <td>${project.note}</td>
          </tr>
        `;
      }).join("");

      const total = data.projects.length || 1;
      const counts = data.projects.reduce((acc, p) => {
        acc[p.status] = (acc[p.status] || 0) + 1;
        return acc;
      }, {});

      document.getElementById("statusChart").innerHTML = ["on-track", "attention", "blocked"].map(key => {
        const qty = counts[key] || 0;
        const pct = Math.round((qty / total) * 100);
        const meta = statusMeta[key];
        return `
          <div class="legend-item">
            <div>${meta.label}</div>
            <div class="track"><div class="fill" style="width:${pct}%;background:${meta.color}"></div></div>
            <div style="text-align:right">${qty}</div>
          </div>
        `;
      }).join("");

      document.getElementById("editor").value = JSON.stringify(data, null, 2);
    }

    function applyEditorData() {
      const txt = document.getElementById("editor").value;
      try {
        const parsed = JSON.parse(txt);
        currentData = parsed;
        renderDashboard(currentData);
      } catch (err) {
        alert("JSON inválido. Revise o conteúdo do editor semanal.");
      }
    }

    renderDashboard(currentData);
  </script>
</body>
</html>
